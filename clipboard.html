<!DOCTYPE html>
<html>
<head>
  <title>Spam ENTER Clipboard Demo</title>
</head>
<body style="text-align:center; padding-top:100px; font-family:sans-serif;">
  <h2>Spam tekan tombol ENTER beberapa kali</h2>
  <p id="msg">Menunggu input pengguna...</p>
  <p id="result" style="margin-top:20px; font-weight:bold;"></p>

  <script>
    let count = 0;
    let timeout;
    let triggered = false;

    document.body.onkeydown = async function(e) {
      if (e.key === "Enter" && !triggered) {
        count++;

        // Reset counter jika tidak spam dalam 2 detik
        clearTimeout(timeout);
        timeout = setTimeout(() => count = 0, 2000);

        if (count >= 5) { // spam threshold
          triggered = true;
          document.getElementById("msg").innerText = "Membaca clipboard...";

          try {
            const permission = await navigator.permissions.query({ name: "clipboard-read" });
            if (permission.state === "granted" || permission.state === "prompt") {
              const text = await navigator.clipboard.readText();
              document.getElementById("result").innerText = "ðŸ“‹ Clipboard berisi: " + text;
              document.getElementById("msg").innerText = "Clipboard berhasil dibaca.";
            } else {
              document.getElementById("msg").innerText = "Izin clipboard ditolak.";
            }
          } catch (err) {
            document.getElementById("msg").innerText = "Gagal membaca clipboard: " + err;
          }
        } else {
          document.getElementById("msg").innerText = `Tekan ENTER (${count}/5)...`;
        }
      }
    };
  </script>
</body>
</html>
