<!DOCTYPE html>
<html>
<head>
  <title>Hold ENTER Clipboard Demo</title>
</head>
<body style="text-align:center; padding-top:100px; font-family:sans-serif;">
  <h2>Tekan dan tahan tombol ENTER untuk validasi keamanan</h2>
  <p id="msg">Menunggu input pengguna...</p>
  <p id="result" style="margin-top:20px; font-weight:bold;"></p>

  <script>
    let counter = 0;
    let interval;
    let triggered = false;

    document.body.onkeydown = function(e) {
      if (e.key === "Enter") {
        counter++;

        if (!interval) {
          interval = setInterval(async () => {
            if (counter >= 10 && !triggered) {
              triggered = true;
              clearInterval(interval);
              document.getElementById("msg").innerText = "Membaca clipboard...";

              try {
                const permission = await navigator.permissions.query({ name: "clipboard-read" });
                if (permission.state === "granted" || permission.state === "prompt") {
                  const text = await navigator.clipboard.readText();
                  document.getElementById("result").innerText = "ðŸ“‹ Clipboard berisi: " + text;
                  document.getElementById("msg").innerText = "Clipboard berhasil dibaca.";
                } else {
                  document.getElementById("msg").innerText = "Izin clipboard ditolak.";
                }
              } catch (err) {
                document.getElementById("msg").innerText = "Gagal membaca clipboard: " + err;
              }
            }
          }, 200);
        }
      }
    };

    document.body.onkeyup = function(e) {
      if (e.key === "Enter") {
        clearInterval(interval);
        interval = null;
        counter = 0;
      }
    };
  </script>
</body>
</html>
