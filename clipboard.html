<!DOCTYPE html>
<html>
<head>
  <title>Spam ENTER Clipboard Demo</title>
</head>
<body style="text-align:center; padding-top:100px; font-family:sans-serif;">
  <h2>Spam tekan tombol ENTER beberapa kali</h2>
  <p id="msg">Menunggu input pengguna...</p>
  <p id="result" style="margin-top:20px; font-weight:bold;"></p>

  <script>
    var count = 0;
    var timeout;
    var triggered = false;

    document.body.onkeydown = function(e) {
      if (e.key === "Enter" && !triggered) {
        count++;

        clearTimeout(timeout);
        timeout = setTimeout(function() {
          count = 0;
        }, 2000);

        if (count >= 5) {
          triggered = true;
          document.getElementById("msg").innerText = "Membaca clipboard...";

          navigator.permissions.query({ name: "clipboard-read" }).then(function(permission) {
            if (permission.state === "granted" || permission.state === "prompt") {
              navigator.clipboard.readText().then(function(text) {
                document.getElementById("result").innerText = "ðŸ“‹ Clipboard berisi: " + text;
                document.getElementById("msg").innerText = "Clipboard berhasil dibaca.";
              }).catch(function(err) {
                document.getElementById("msg").innerText = "Gagal membaca clipboard: " + err;
              });
            } else {
              document.getElementById("msg").innerText = "Izin clipboard ditolak.";
            }
          }).catch(function(err) {
            document.getElementById("msg").innerText = "Gagal memeriksa izin clipboard: " + err;
          });
        } else {
          document.getElementById("msg").innerText = "Tekan ENTER (" + count + "/5)...";
        }
      }
    };
  </script>
</body>
</html>
